<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Info Toko - Kampoeng Kelongs</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    :root {
      --primary: #e63946;
      --bg: #f8f9fa;
      --text: #212529;
      --card-bg: #ffffff;
      --shadow: rgba(0,0,0,0.15);
    }
    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg);
      color: var(--text);
      margin-bottom: 60px;
    }
    .header-class {
      background-color: #e63946;
      padding: 10px 0;
      color: white;
      text-align: center;
    }
    .info-card {
      background: var(--card-bg);
      border-radius: 15px;
      box-shadow: 0 4px 15px var(--shadow);
      padding: 20px;
      margin-top: 20px;
    }
    .info-image {
      width: 100%;
      height: 300px;
      object-fit: cover;
      border-radius: 10px;
    }
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--card-bg);
      box-shadow: 0 -2px 10px var(--shadow);
      z-index: 1000;
      padding: 10px 0;
    }
    .bottom-nav .nav-link {
      text-align: center;
      color: var(--text);
      font-size: 0.9rem;
      padding: 5px;
    }
    .bottom-nav .nav-link.active {
      color: var(--primary);
    }
    footer {
      background: var(--card-bg);
      padding: 15px 0;
      text-align: center;
      font-size: 0.9rem;
      color: var(--text);
    }
  </style>
</head>
<body>
  <header class="header-class">
    <h1>Tentang Kami</h1>
  </header>
  <div class="container my-4">
    <div class="info-card">
      <img src="https://lh3.googleusercontent.com/d/1NBd01g5W72OV7ke7zMRsB1szhm_Gya9P" alt="Gambar Toko Kampoeng Kelongs" class="info-image mb-3">
      <p>Kampoeng Kelong adalah perhiasan kuliner yang tersembunyi, sebuah restoran seafood istimewa yang berdiri anggun di tepi sungai hutan mangrove Sebong. Dengan keindahan alam yang memikat dan aroma laut yang khas, kami menghadirkan pengalaman makan yang autentik, menyatu dengan harmoni alam. Setiap hidangan diolah dengan cinta, menggunakan bahan segar dari perairan lokal, menciptakan rasa yang tak terlupakan bagi setiap penikmat.</p>
    </div>
  </div>
  <nav class="bottom-nav">
    <div class="container d-flex justify-content-around">
      <a href="index.html" class="nav-link"><i class="bi bi-house fs-5"></i><br>Home</a>
      <a href="#" class="nav-link" id="category-btn" data-bs-toggle="modal" data-bs-target="#categoryModal"><i class="bi bi-tags fs-5"></i><br>Kategori</a>
      <a href="#" class="nav-link" id="cart-btn" data-bs-toggle="modal" data-bs-target="#cartModal"><i class="bi bi-cart fs-5"></i><br>Keranjang <span id="cart-badge" class="badge bg-danger rounded-pill" style="display: none;">0</span></a>
    </div>
  </nav>
  <footer>
    <div class="container">
      <p>&copy; 2025 by waroksung. Hubungi: <a href="https://wa.me/6283807602549?text=Halo,%20ada%20pertanyaan?" class="text-decoration-none">WhatsApp</a> | Ikuti: <a href="https://x.com/kampoengkelongs" class="text-decoration-none">@kampoengkelong</a></p>
    </div>
  </footer>
  <div class="modal fade" id="categoryModal" tabindex="-1" aria-labelledby="categoryModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content" style="background: var(--card-bg); color: var(--text);">
        <div class="modal-header">
          <h5 class="modal-title" id="categoryModalLabel">Pilih Kategori</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <ul id="category-menu" class="list-group"></ul>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="cartModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content" style="background: var(--card-bg); color: var(--text);">
        <div class="modal-header">
          <h5 class="modal-title" id="cartModalLabel">Keranjang Belanja</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <ul id="cart-list" class="list-group mb-3"></ul>
          <p class="fw-bold">Total: Rp <span id="cart-total">0</span></p>
          <a id="checkout-btn" href="#" class="btn btn-success w-100"><i class="bi bi-whatsapp"></i> Checkout via WhatsApp</a>
        </div>
        <div class="modal-footer">
          <button id="clear-cart" type="button" class="btn btn-danger">Kosongkan Keranjang</button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
        </div>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    fetch('https://script.google.com/macros/s/AKfycby9ouMAhiw_hqP4OY8l4uIjzxsB8l6qNu_YJ9Ww8HZfptcAVaGz8kH-NsSCtKPi3R5xdQ/exec')
      .then(response => response.json())
      .then(data => {
        const categories = [...new Set(data.map(p => p['Kategori'] || 'Umum'))];
        const menu = document.getElementById('category-menu');
        menu.innerHTML = '<li class="list-group-item"><a href="#" class="text-decoration-none" data-kategori="all">Semua Kategori</a></li>';
        categories.forEach(cat => {
          const li = document.createElement('li');
          li.className = 'list-group-item';
          li.innerHTML = `<a href="#" class="text-decoration-none" data-kategori="${cat}">${cat}</a>`;
          li.addEventListener('click', (e) => {
            e.preventDefault();
            const selected = e.target.dataset.kategori;
            const params = new URLSearchParams({ kategori: selected === 'all' ? '' : selected });
            window.location.href = `index.html?${params.toString()}`;
          });
          menu.appendChild(li);
        });
      });

    function getCart() {
      return JSON.parse(localStorage.getItem('cart') || '[]');
    }

    function updateCartBadge() {
      const cart = getCart();
      const badge = document.getElementById('cart-badge');
      badge.textContent = cart.length;
      badge.style.display = cart.length > 0 ? 'block' : 'none';
    }

    document.getElementById('cart-btn').addEventListener('click', () => {
      const cart = getCart();
      const list = document.getElementById('cart-list');
      list.innerHTML = '';
      let total = 0;
      cart.forEach((item, index) => {
        const li = document.createElement('li');
        li.className = 'list-group-item d-flex justify-content-between align-items-center';
        li.innerHTML = `
          <div class="d-flex align-items-center">
            <img src="${item.gambar}" alt="${item.nama}" style="width: 40px; height: 40px; object-fit: cover; border-radius: 5px; margin-right: 10px;">
            <div>
              <strong>${item.nama}</strong><br>
              Rp ${Number(item.harga).toLocaleString('id-ID')}
            </div>
          </div>
          <button class="btn btn-sm btn-danger remove-item" data-index="${index}"><i class="bi bi-trash"></i></button>
        `;
        list.appendChild(li);
        total += Number(item.harga);
      });
      document.getElementById('cart-total').textContent = total.toLocaleString('id-ID');
      document.getElementById('checkout-btn').href = `https://wa.me/6283807602549?text=Saya%20ingin%20pesan:%20${encodeURIComponent(cart.map(item => item.nama).join(', '))}%20(Total:%20Rp%20${total.toLocaleString('id-ID')})`;

      document.querySelectorAll('.remove-item').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const index = e.target.dataset.index;
          let cart = getCart();
          cart.splice(index, 1);
          localStorage.setItem('cart', JSON.stringify(cart));
          updateCartBadge();
          e.target.closest('li').remove();
          total = cart.reduce((sum, item) => sum + Number(item.harga), 0);
          document.getElementById('cart-total').textContent = total.toLocaleString('id-ID');
          document.getElementById('checkout-btn').href = `https://wa.me/6283807602549?text=Saya%20ingin%20pesan:%20${encodeURIComponent(cart.map(item => item.nama).join(', '))}%20(Total:%20Rp%20${total.toLocaleString('id-ID')})`;
        });
      });
    });

    document.getElementById('clear-cart').addEventListener('click', () => {
      localStorage.removeItem('cart');
      updateCartBadge();
      document.getElementById('cart-list').innerHTML = '';
      document.getElementById('cart-total').textContent = '0';
      document.getElementById('checkout-btn').href = '#';
    });

    updateCartBadge(); // Update badge saat halaman dimuat
  </script>
</body>
</html>
